var w=e=>{throw TypeError(e)};var C=(e,t,s)=>t.has(e)||w("Cannot "+s);var i=(e,t,s)=>(C(e,t,"read from private field"),s?s.call(e):t.get(e)),x=(e,t,s)=>t.has(e)?w("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),b=(e,t,s,r)=>(C(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),f=(e,t,s)=>(C(e,t,"access private method"),s);import{S as P,s as z,h as E,g as q,n as k,i as A,r as g,k as F,l as L,a as K,j as a,c as Q,m as D,O as T}from"./main-VyRsR0rF.js";import{u as U}from"./useSuspenseQuery-DWt-qX43.js";import{y as _,u as V,r as B,s as Z,z as O,D as $,t as G,v as H,A as J,w as W,x as R}from"./constraint-D0M3rZYh.js";var c,d,n,l,h,j,S,I,X=(I=class extends P{constructor(t,s){super();x(this,h);x(this,c);x(this,d);x(this,n);x(this,l);b(this,c,t),this.setOptions(s),this.bindMethods(),f(this,h,j).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const s=this.options;this.options=i(this,c).defaultMutationOptions(t),z(this.options,s)||i(this,c).getMutationCache().notify({type:"observerOptionsUpdated",mutation:i(this,n),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&E(s.mutationKey)!==E(this.options.mutationKey)?this.reset():((r=i(this,n))==null?void 0:r.state.status)==="pending"&&i(this,n).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=i(this,n))==null||t.removeObserver(this)}onMutationUpdate(t){f(this,h,j).call(this),f(this,h,S).call(this,t)}getCurrentResult(){return i(this,d)}reset(){var t;(t=i(this,n))==null||t.removeObserver(this),b(this,n,void 0),f(this,h,j).call(this),f(this,h,S).call(this)}mutate(t,s){var r;return b(this,l,s),(r=i(this,n))==null||r.removeObserver(this),b(this,n,i(this,c).getMutationCache().build(i(this,c),this.options)),i(this,n).addObserver(this),i(this,n).execute(t)}},c=new WeakMap,d=new WeakMap,n=new WeakMap,l=new WeakMap,h=new WeakSet,j=function(){var s;const t=((s=i(this,n))==null?void 0:s.state)??q();b(this,d,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},S=function(t){k.batch(()=>{var s,r,o,m,u,v,N,M;if(i(this,l)&&this.hasListeners()){const p=i(this,d).variables,y=i(this,d).context;(t==null?void 0:t.type)==="success"?((r=(s=i(this,l)).onSuccess)==null||r.call(s,t.data,p,y),(m=(o=i(this,l)).onSettled)==null||m.call(o,t.data,null,p,y)):(t==null?void 0:t.type)==="error"&&((v=(u=i(this,l)).onError)==null||v.call(u,t.error,p,y),(M=(N=i(this,l)).onSettled)==null||M.call(N,void 0,t.error,p,y))}this.listeners.forEach(p=>{p(i(this,d))})})},I);function Y(e,t){const s=A(),[r]=g.useState(()=>new X(s,e));g.useEffect(()=>{r.setOptions(e)},[r,e]);const o=g.useSyncExternalStore(g.useCallback(u=>r.subscribe(k.batchCalls(u)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),m=g.useCallback((u,v)=>{r.mutate(u,v).catch(F)},[r]);if(o.error&&L(r.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:m,mutateAsync:o.mutate}}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=[["path",{d:"M4 9a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h4a1 1 0 0 1 1 1v4a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-4a1 1 0 0 1 1-1h4a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2h-4a1 1 0 0 1-1-1V4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4a1 1 0 0 1-1 1z",key:"1xbrqy"}]],st=_("cross",tt);function et({button:e,organisation:t}){const{mutate:s}=Y({mutationFn:V(K.department.create)}),[r,o]=B({constraint:Z(O.object({name:O.string().min(1,"Naam is verplicht"),slug:O.string().min(1,"Slug is verplicht")})),defaultValue:{name:"",slug:""},onSubmit(m,{submission:u}){m.preventDefault(),!(!u||u.status!=="success")&&(s({...u.value,organisationId:t._id}),r.reset())}});return a.jsxs($,{children:[a.jsx(G,{asChild:!0,children:e}),a.jsxs(H,{children:[a.jsx(J,{children:"Maak nieuwe afdeling"}),a.jsxs("form",{...W(r),children:[a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("label",{children:["Naam:",a.jsx("input",{...R(o.name,{type:"text"}),"aria-describedby":"name-error",className:"border p-2 rounded w-full"})]}),a.jsxs("label",{children:["Slug:",a.jsx("input",{...R(o.slug,{type:"text"}),"aria-describedby":"slug-error",className:"border p-2 rounded w-full"})]})]}),a.jsx("button",{type:"submit",className:"mt-4 btn btn-primary",children:"Opslaan"})]})]})]})}const ot=function(){const{data:t}=U(Q(K.organisation.getById,{organisationId:D.useParams().id})),{id:s}=D.useParams();return a.jsxs("div",{className:"flex flex-col p-12 h-full gap-4",children:[a.jsx("div",{className:"flex",children:a.jsx("h1",{children:t==null?void 0:t.name})}),a.jsxs("div",{className:"flex gap-8 flex-1",children:[a.jsx("div",{className:"w-1/4 bg-gray-200 p-2 rounded-md",children:a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{children:"Afdelingen"}),t&&a.jsx(et,{button:a.jsx("button",{className:"rounded-full border border-gray-600 text-gray-600 flex items-center justify-center size-8",children:a.jsx(st,{size:16})}),organisation:t})]})}),a.jsx("div",{className:"flex-1",children:a.jsx(T,{})})]})]})};export{ot as component};
